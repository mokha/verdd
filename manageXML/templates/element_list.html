{% extends 'template.html' %}
{% load i18n %}
{% load custom_tags %}
{% load widget_tweaks %}

{% block main_content %}
    <form method="get">
        <div class="well">
            <h4 style="margin-top: 0">{% trans "Filter" %}</h4>
            <div class="row">
                <div class="form-group col-sm-4 col-md-3">
                    {{ filterset.form.lexeme.label_tag }}
                    {% render_field filterset.form.lexeme class="form-control" %}
                </div>
                <div class="form-group col-sm-4 col-md-3">
                    {{ filterset.form.pos.label_tag }}
                    {% render_field filterset.form.pos class="form-control" %}
                </div>
                <div class="form-group col-sm-4 col-md-3">
                    {{ filterset.form.checked.label_tag }}
                    {% render_field filterset.form.checked class="form-control" %}
                </div>
            </div>
            <div class="row">
                <div class="form-group col-sm-4 col-md-3">
                    {{ filterset.form.range_from.label_tag }}
                    {% render_field filterset.form.range_from class="form-control" %}
                </div>
                <div class="form-group col-sm-4 col-md-3">
                    {{ filterset.form.range_to.label_tag }}
                    {% render_field filterset.form.range_to class="form-control" %}
                </div>
            </div>
            <button type="submit" class="btn btn-primary">
                <span class="glyphicon glyphicon-search"></span> Search
            </button>
        </div>
    </form>

    <br/>

    <table class="table table-bordered">
        <thead>
        <tr>
            <th>{% trans "ID" %}</th>
            <th>{% trans "Lexeme" %}</th>
            <th>{% trans "POS" %}</th>
            <th>{% trans "Translations" %}</th>
            <th>{% trans "Processed" %}</th>
            <th>{% trans "Notes" %}</th>
            <th>{% trans "Actions" %}</th>
        </tr>
        </thead>
        <tbody>
        {% for obj in object_list %}
            <tr>
                <td>{{ obj.id }}</td>
                <td>{{ obj.lexeme }}</td>
                <td>{{ obj.pos }}</td>
                <td>
                    <ul>
                        {% for t in obj.translation_set.all %}
                            <li>{{ t.text }}{% if t.pos %} ({{ t.pos }}){% endif %}</li>
                        {% endfor %}
                    </ul>
                </td>
                <td>{% if t.checked %}✓{% else %}✗{% endif %}</td>
                <td>{{ obj.notes|linebreaksbr }}</td>
                <td>
                    <ul>
                        <li><a href="{% url 'element-detail' pk=obj.pk slug=obj.slug %}">{% trans "view" %}</a></li>
                        <li><a href="{% url 'element-edit' pk=obj.pk slug=obj.slug %}">{% trans "edit" %}</a></li>
                    </ul>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    {% if is_paginated %}
        {% if page_obj.has_previous %}
            <a href="?{% param_replace page=1 %}">First</a>
            {% if page_obj.previous_page_number != 1 %}
                <a href="?{% param_replace page=page_obj.previous_page_number %}">Previous</a>
            {% endif %}
        {% endif %}

        {% trans "Page" %} {{ page_obj.number }} of {{ paginator.num_pages }}

        {% if page_obj.has_next %}
            {% if page_obj.next_page_number != paginator.num_pages %}
                <a href="?{% param_replace page=page_obj.next_page_number %}">Next</a>
            {% endif %}
            <a href="?{% param_replace page=paginator.num_pages %}">Last</a>
        {% endif %}

        {#        <p>{% trans "Results" %}: {{ page_obj.start_index }}—{{ page_obj.end_index }}</p>#}
    {% endif %}
{% endblock %}