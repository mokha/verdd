{% extends 'template.html' %}
{% load custom_tags %}
{% load widget_tweaks %}

{% block main_content %}
    <h1>Words</h1>
    <form method="get">
        <div class="well">
            <h4 style="margin-top: 0">Filter</h4>
            <div class="row">
                <div class="form-group col-sm-4 col-md-3">
                    {{ filterset.form.lexeme.label_tag }}
                    {% render_field filterset.form.lexeme class="form-control" %}
                </div>
                <div class="form-group col-sm-4 col-md-3">
                    {{ filterset.form.pos.label_tag }}
                    {% render_field filterset.form.pos class="form-control" %}
                </div>
            </div>
            <button type="submit" class="btn btn-primary">
                <span class="glyphicon glyphicon-search"></span> Search
            </button>
        </div>
    </form>

    <br/>

    <table class="table table-bordered">
        <thead>
        <tr>
            <th>ID</th>
            <th>Lexeme</th>
            <th>POS</th>
            <th>Translations</th>
            <th>Notes</th>
        </tr>
        </thead>
        <tbody>
        {% for obj in object_list %}
            <tr>
                <td>{{ obj.id }}</td>
                <td>{{ obj.lexeme }}</td>
                <td>{{ obj.pos }}</td>
                <td>
                    <ul>
                        {% for t in obj.translation_set.all %}
                            <li>{{ t.text }}{% if t.pos %} ({{ t.pos }}){% endif %}</li>
                        {% endfor %}
                    </ul>
                </td>
                <td>{{ obj.notes|linebreaksbr }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    {% if is_paginated %}
        {% if page_obj.has_previous %}
            <a href="?{% param_replace page=1 %}">First</a>
            {% if page_obj.previous_page_number != 1 %}
                <a href="?{% param_replace page=page_obj.previous_page_number %}">Previous</a>
            {% endif %}
        {% endif %}

        Page {{ page_obj.number }} of {{ paginator.num_pages }}

        {% if page_obj.has_next %}
            {% if page_obj.next_page_number != paginator.num_pages %}
                <a href="?{% param_replace page=page_obj.next_page_number %}">Next</a>
            {% endif %}
            <a href="?{% param_replace page=paginator.num_pages %}">Last</a>
        {% endif %}

        <p>Objects {{ page_obj.start_index }}â€”{{ page_obj.end_index }}</p>
    {% endif %}
{% endblock %}